<HTML>
<HEAD>
<TITLE>NAME</TITLE>
<BASE href="http://perlcritic.com/pod"><LINK href="/styles/pod.css" type="text/css" rel="stylesheet"></HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000">
<UL>
<LI><A HREF="#NAME">NAME

</A><LI><A HREF="#AFFILIATION">AFFILIATION

</A><LI><A HREF="#DESCRIPTION">DESCRIPTION

</A><LI><A HREF="#CONFIGURATION">CONFIGURATION

</A><LI><A HREF="#RESTRICTIONS">RESTRICTIONS

</A><LI><A HREF="#NOTES">NOTES

</A><LI><A HREF="#AUTHOR">AUTHOR

</A><LI><A HREF="#COPYRIGHT">COPYRIGHT

</A></UL>
<HR>
<H1><A NAME="NAME">NAME

</A></H1>

<P>Perl::Critic::Policy::Variables::ProhibitEvilVariables - Ban variables that aren't blessed by your shop.


</P><H1><A NAME="AFFILIATION">AFFILIATION

</A></H1>

<P>This Policy is part of the core <A HREF="Perl/Critic.html">Perl::Critic</A>
distribution.


</P><H1><A NAME="DESCRIPTION">DESCRIPTION

</A></H1>

<P>Use this policy if you wish to prohibit the use of specific variables. These
may be global variables warned against in <CODE>perlvar</CODE>, or just variables whose
names you do not like.


</P><H1><A NAME="CONFIGURATION">CONFIGURATION

</A></H1>

<P>The set of prohibited variables is configurable via the <CODE>variables</CODE> and
<CODE>variables_file</CODE> options.

</P>
<P>The value of <CODE>variables</CODE> should be a string of space-delimited, fully
qualified variable names and/or regular expressions.  An example of
prohibiting two specific variables in a <I>.perlcriticrc</I> file:

</P>
<PRE>    [Variables::ProhibitEvilVariables]
    variables = $[ $^S $SIG{__DIE__}</PRE>

<P>If you prohibit an array or hash (e.g. <CODE>@INC</CODE>), use of elements of the array
or hash will be prohibited as well. If you specify a subscripted variable (e.g.
<CODE>$SIG{__DIE__}</CODE>), only the literal subscript specified will be detected. The
above &lt;.perlcritic&gt; file, for example, will cause <CODE>perlcritic (1)</CODE> to detect
<CODE>$SIG{__DIE__} = \&amp;foo</CODE>, but not

</P>
<PRE>    my $foo = '__DIE__';
    $SIG{$foo} = \&amp;foo;</PRE>

<P>Regular expressions are identified by values beginning and ending with
slashes.  Any variable with a name that matches <CODE>m/pattern/sm</CODE> will be
forbidden.  For example:

</P>
<PRE>    [Variables::ProhibitEvilVariables]
    variables = /acme/</PRE>

<P>would cause all variables that match <CODE>m/acme/</CODE> to be forbidden.  If
you want a case-blind check, you can use (?i: ... ).  For example

</P>
<PRE>    [Variables::ProhibitEvilVariables]
    variables = /(?i:acme)/</PRE>

<P>forbids variables that match <CODE>m/acme/smi</CODE>.

</P>
<P>In addition, you can override the default message (&quot;Prohibited variable
&quot;<I>variable</I>&quot; used&quot;) with your own, in order to give suggestions for
alternative action.  To do so, put your message in curly braces after
the variable name or regular expression.  Like this:

</P>
<PRE>    [Variables::ProhibitEvilVariables]
    variables = $[ {Found use of $[. Program to base index 0 instead}</PRE>

<P>If your message contains curly braces, you can enclose it in parentheses,
angle brackets, or square brackets instead.

</P>
<P>Similarly, the <CODE>variables_file</CODE> option gives the name of a file
containing specifications for prohibited variables.  Only one variable
specification is allowed per line and comments start with an octothorp
and run to end of line; no curly braces are necessary for delimiting
messages:

</P>
<PRE>    $[      # Prohibit the &quot;$[&quot; variable and use the default message.

    # Prohibit the &quot;$^S&quot; variable and give a replacement message.
    $^S     Having to think about $^S in exception handlers is just wrong

    # Use a regular expression.
    /acme/  No coyotes allowed.</PRE>

<P>By default, there are no prohibited variables, although I can think of a
few that should be.  See <CODE>perldoc perlvar</CODE> for a few suggestions.


</P><H1><A NAME="RESTRICTIONS">RESTRICTIONS

</A></H1>

<P>Variables of the form <CODE>${^foo}</CODE> are not recognized by PPI as of version
1.206. When PPI recognizes these, this policy will Just Work for them too.

</P>
<P>Only direct references to prohibited variables and literal subscripts will be
recognized. For example, if you prohibit $[, the first line in

</P>
<PRE> my $foo = \$[;
 $$foo = 1;</PRE>

<P>will be flagged as a violation, but not the second, even though the second, in
fact, assigns to $[. Similarly, if you prohibit $SIG{__DIE__}, this policy
will not recognize

</P>
<PRE> my $foo = '__DIE__';
 $SIG{$foo} = sub {warn 'I cannot die!'};</PRE>

<P>as an assignment to $SIG{__DIE__}.


</P><H1><A NAME="NOTES">NOTES

</A></H1>

<P>This policy leans heavily on
<A HREF="Perl/Critic/Policy/Modules/ProhibitEvilModules.html">Perl::Critic::Policy::Modules::ProhibitEvilModules</A>
by Jeffrey Ryan Thalhammer.


</P><H1><A NAME="AUTHOR">AUTHOR

</A></H1>

<P>Thomas R. Wyant, III <I>wyant at cpan dot org</I>


</P><H1><A NAME="COPYRIGHT">COPYRIGHT

</A></H1>

<P>Copyright (c) 2009-2011 Thomas R. Wyant, III

</P>
<P>This program is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.  The full text of this license
can be found in the LICENSE file included with this module.

</P>
</BODY>
</HTML>
